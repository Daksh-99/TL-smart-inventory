{% comment %} <!DOCTYPE html>
<html>
  <head>
    <title>RFID Scanner</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  </head>
  <body>
    <h1>Welcome, <span id="student_name">{{student.name}}</span></h1>

    <p>Scanned RFID Tag: <span id="rfid_tag"></span></p>

    <!-- Add a button to trigger RFID scanning -->
    <button id="startScanButton">Start RFID Scan</button>

    <a href="{% url 'borrow_item' %}">Borrow Item</a><br />
    <a href="{% url 'student_items' %}">Submit Item</a>

    <script>
      $(document).ready(function () {
        async function scanRFID() {
          try {
            const port = await navigator.serial.requestPort();
            await port.open({ baudRate: 9600 });

            const reader = port.readable.getReader();
            while (true) {
              const { value, done } = await reader.read();
              if (done) break;

              const rfidTag = new TextDecoder().decode(value);
              document.getElementById("rfid_tag").textContent = rfidTag;

              // Perform an AJAX request to send the RFID tag to the server
              $.ajax({
                type: "POST",
                url: "http://localhost:8000/", // Replace with the actual URL
                data: { rfid_tag: rfidTag },
                success: function (data) {
                  if (data.success) {
                    // RFID tag found, update the page content
                    document.getElementById("rfid_tag").textContent = rfidTag; // Update RFID tag
                    document.getElementById("student_name").textContent =
                      data.student.name; // Update student name
                  } else {
                    // RFID tag not found, handle this case
                    console.log("No RFID tag found");
                  }
                },
                error: function () {
                  // Handle errors here
                  console.log("Failed to send RFID tag");
                },
              });
            }

            await port.close();
          } catch (error) {
            console.error(`Error: ${error}`);
          }
        }

        // Call the scanRFID function when the "Start RFID Scan" button is clicked
        document
          .getElementById("startScanButton")
          .addEventListener("click", function () {
            scanRFID();
          });
      });
    </script>
  </body>
</html>
{% endcomment %}

<!DOCTYPE html>
<html>
  <head>
    <title>Home</title>
    <style>
      body {
        display: flex;
        justify-content: center;
        background-color: #f4f4f4;
        align-items: center;
        height: 100vh;
        margin: 0;
        font-family: Arial, sans-serif;
      }

      .container {
        text-align: center;
        background-color: #fff;
        max-width: 80%; /* Set a maximum width for the container */
        width: 50%; /* Make sure it takes up the full width */
        padding: 30px; /* Add some padding for spacing inside */
        border-radius: 15px; /* Add rounded corners */
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Add a shadow effect */
      }

      h1 {
        font-size: 2em;
        margin-bottom: 20px;
      }

      .links {
        display: flex;
        flex-direction: column;
        font-size: 1.2em;
      }

      a {
        text-decoration: none;
        color: #333;
        font-size: 1.2em;
        margin-bottom: 10px;
        transition: color 0.3s; /* Add transition for color change */
      }

      a:hover {
        text-decoration: underline;
        color: #777; /* Change color on hover */
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Welcome, <span id="student_name">{{student.name}}</span></h1>

      <div class="links">
        <a class="button" href="{% url 'borrow_item' %}">Borrow Item</a><br />
        <a class="button" href="{% url 'student_items' %}">Submit Item</a>
      </div>
    </div>
  </body>
</html>
